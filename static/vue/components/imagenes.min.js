export default{template:'\n\t<div>\n\t    <form>\n\t\t<div class="form-group">\n\t\t    <label for="Agregar">Agregar imagenes</label>\n\t\t    <input name="" type="file" multiple value="" class="form-control" @change="processImg($event)" />\n\t\t</div>\n\t    </form>\n\n\t    <div class="progress">\n\t\t<div class="progress-bar progress-bar-striped" id="uploadFiles" role="progressbar" :style="\'width:\'+progress+\'%\'" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"></div>\n\t    </div>\n\n\t    <hr/>\n\t    <h4 class="float-sm-left">Imagenes subidas</h4> <p class="info info-default float-sm-right">Para eliminar una imagen haga click sobre la misma</p>\n\t    <br/>\n\t    <hr/>\n\t    <div class="container row">\n\t\t<div class="col-sm-3 img-container" v-for="imagen in imagenes" @click="deleteCurrent(imagen.id)">\n\t\t    <img alt="" :src="\'../default/download/\'+ imagen.imagen" class="img-thumbnail"/>\n\t\t    <i class="fa fa-trash img-deletable"></i>\n\t\t</div>\n\t    </div>\n\t</div>\n    ',data:()=>({subir:null,imagenes:[],imagen:"",fileCount:0,currentFile:0}),computed:{progress(){return 100*this.currentFile/this.fileCount||0}},methods:{datos(){axios.get("../servicios/api/imagenes").then(e=>this.imagenes=e.data.rows).catch(e=>e.data)},deleteCurrent(e){1==confirm("Esta imagen será eliminada, esta operación no puede ser revertida. ¿Confirmar?")&&axios.delete(`../servicios/api/imagenes/${e}`).then(e=>{console.log(e.data),this.datos()}).catch(e=>console.log(e.data))},postData(e,t){axios.post(e,t).then(e=>{console.log("file uploaded"),this.datos()}).catch(e=>{console.log(e.data)}),console.log("posting data")},processImg(e){var t=e.target.files;this.fileCount=e.target.files.length;if(this.fileCount>1){for(let e=0;e<this.fileCount;e++){const a={onUploadProgress:e=>console.log(e.loaded)};let i=new FormData;console.log("Uploading file..."),i.append("titulo",t[e].name),i.append("imagen",t[e]),axios.post("../servicios/api/imagenes",i,a).then(t=>{this.currentFile=e+1,this.datos()})}setTimeout(()=>{this.currentFile=0,this.fileCount=0,console.log("reset progress")},3e3),e.target.reset()}else if(1==this.fileCount){let e=new FormData;console.log("Uploading file..."),e.append("titulo",t[0].name),e.append("imagen",t[0]),this.postData("../servicios/api/imagenes",e),this.subir=null}}},mounted(){this.datos()}};